(this["webpackJsonpreact-weather"]=this["webpackJsonpreact-weather"]||[]).push([[0],{29:function(e,t,n){e.exports=n(70)},34:function(e,t,n){},35:function(e,t,n){},36:function(e,t,n){},53:function(e,t,n){},60:function(e,t,n){},61:function(e,t,n){},62:function(e,t,n){},63:function(e,t,n){},64:function(e,t,n){},65:function(e,t,n){},66:function(e,t,n){},67:function(e,t,n){},68:function(e,t,n){},70:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(11),l=n.n(c),o=(n(34),n(35),n(3)),i=(n(36),function(e,t){Object(a.useEffect)((function(){var n=function(n){e.current&&!e.current.contains(n.target)&&t(n)};return document.addEventListener("mousedown",n),document.addEventListener("touchstart",n),function(){document.removeEventListener("mousedown",n),document.removeEventListener("touchstart",n)}}),[e,t])}),u=n(13),s=n.n(u),d=s.a.create({baseURL:"https://api.openweathermap.org/data/2.5/"}),m=s.a.create({baseURL:"https://nominatim.openstreetmap.org/"}),E=function(e){return m.get("search",{params:{q:e,format:"json",addressdetails:1}}).then((function(e){return e.data.map((function(e){return{display_name:e.display_name,lat:e.lat,lon:e.lon,address:e.address}})).filter((function(e){var t=e.address;return null!==t.city&&void 0!==t.city||null!==t.village&&void 0!==t.vilage}))}))},f=(n(53),function(){return r.a.createElement("div",{className:"loader"},r.a.createElement("div",{className:"lds-ellipsis"},r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null)))}),p=n(7),h=function(e){return{type:"[CITY] Set city",payload:e}},v=n(5),y=n(1),b=n(8),g=n.n(b),O=function(e){return[{id:"01d",icon:y.o,color:"#ffc845"},{id:"02d",icon:y.i,color:"#ffc845"},{id:"03d",icon:y.e,color:"#7C7E8D"},{id:"04d",icon:y.i,color:"#ffc845"},{id:"09d",icon:y.h,color:"#16132f"},{id:"10d",icon:y.j,color:"#16132f"},{id:"11d",icon:y.c,color:"#ffc845"},{id:"13d",icon:y.n,color:"#25A2D8"},{id:"50d",icon:y.m,color:"#cccccc"},{id:"01n",icon:y.k,color:"#4e4cac"},{id:"02n",icon:y.f,color:"#4e4cac"},{id:"03n",icon:y.e,color:"#7C7E8D"},{id:"04n",icon:y.f,color:"#4e4cac"},{id:"09n",icon:y.h,color:"#16132f"},{id:"10n",icon:y.g,color:"#4e4cac"},{id:"11n",icon:y.c,color:"#ffc845"},{id:"13n",icon:y.n,color:"#25A2D8"},{id:"50n",icon:y.m,color:"#cccccc"}].find((function(t){return t.id===e}))},j=function(e){return["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][new Date(1e3*e).getDay()]},w=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=new Date(1e3*e),a="".concat(String(n.getHours()).padStart(2,"0"),"h");return t&&(a+=String(n.getMinutes()).padStart(2,"0")),a},N=function(e,t){return"celsius"===t?Math.round(e):Math.round(9*e/5+32)},S=function(e){return e.substr(0,1).toUpperCase()+e.slice(1)},k=function(e){return e?{cityName:e.city||e.municipality||e.town||e.village,countyName:e.region||e.state||e.state_district||e.county,countryName:e.country||e.country_code||e.continent}:null},T=function(e,t,n){return function(a,r){a({type:"[TOAST] Add toast",payload:{title:e,message:t,type:n}}),setTimeout((function(){a(C())}),3e3)}},C=function(){return{type:"[TOAST] Remove toast"}},R=function(){var e=Object(a.useState)(),t=Object(o.a)(e,2),n=t[0],c=t[1],l=Object(a.useState)(!1),u=Object(o.a)(l,2),s=u[0],d=u[1],b=Object(p.b)(),O=Object(p.c)((function(e){return e.cityReducer.city})),j=Object(a.useState)(!1),w=Object(o.a)(j,2),N=w[0],S=w[1],C=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=Object(a.useState)(!1),r=Object(o.a)(n,2),c=r[0],l=r[1],i=Object(a.useState)(null),u=Object(o.a)(i,2),s=u[0],d=u[1],m=Object(a.useState)(null),E=Object(o.a)(m,2),f=E[0],p=E[1],h=Object(a.useCallback)((function(){return l(!0),d(null),p(null),e.apply(void 0,arguments).then((function(e){return d(e)})).catch((function(e){return p(e)})).finally((function(){return l(!1)}))}),[e]);return Object(a.useEffect)((function(){t&&h()}),[h,t]),{execute:h,pending:c,value:s,error:f}}(E,!1),R=C.execute,W=C.pending,D=C.value,A=C.error,F=function(e,t){var n=Object(a.useState)(e),r=Object(o.a)(n,2),c=r[0],l=r[1];return Object(a.useEffect)((function(){var n=setTimeout((function(){l(e)}),t);return function(){clearTimeout(n)}}),[e,t]),c}(n,500);Object(a.useEffect)((function(){F&&(b({type:"[CITY] Reset city"}),R(F))}),[F,R,b]);var H=Object(a.useRef)();return i(H,(function(){return d(!1)})),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"searchbar"},r.a.createElement("button",{title:"Search my location",onClick:function(){"geolocation"in navigator?(S(!0),navigator.geolocation.getCurrentPosition((function(e){var t,n;(t=e.coords.latitude,n=e.coords.longitude,m.get("reverse",{params:{lat:t,lon:n,format:"json",addressdetails:1}}).then((function(e){var t=e.data;return{display_name:t.display_name,lat:t.lat,lon:t.lon,address:t.address}}))).then((function(e){b(h(e)),S(!1)}))}),(function(e){S(!1),b(T("Unable to locate you.","Please type in your location manually.","error"))}))):(S(!1),b(T("Your browser doesn't support geolocation.","Please type in your location manually.","error")))}},N||W?r.a.createElement(v.a,{icon:y.d,spin:!0}):r.a.createElement(v.a,{icon:y.l})),s?r.a.createElement("input",{autoFocus:!0,ref:H,type:"text",placeholder:"City name",onChange:function(e){return c(e.target.value)}}):r.a.createElement("span",{onClick:function(){d(!0)},className:g()("placeholder",{empty:!(null===O||void 0===O?void 0:O.address)})},O&&k(null===O||void 0===O?void 0:O.address).cityName||"City name"),!O&&(null===D||void 0===D?void 0:D.length)>0&&r.a.createElement("div",{className:"query-results"},D.map((function(e,t){return r.a.createElement("button",{key:t,onClick:function(){return function(e){b(h(e))}(e)}},e.address.city,", ",e.address.state,","," ",e.address.country)})),W&&r.a.createElement(f,null),A&&r.a.createElement("div",{className:"error"},A))))},W=function(e,t){return function(n,a){n({type:"[WEATHER] Get Weather"}),function(e,t){return d.get("onecall",{params:{appid:"1fd63ed6b683a7512a417626e610f987",lat:e,lon:t,units:"metric"}}).then((function(e){var t=e.data,n=24-(new Date).getHours();return t.hourly=[t.hourly.slice(0,n+1),t.hourly.slice(n+1,25+n)],t}))}(e,t).then((function(e){n(D(e))})).catch((function(e){n(A(e))}))}},D=function(e){return{type:"[WEATHER] Get Weather - Success",payload:e}},A=function(e){return{type:"[WEATHER] Get Weather - Failure",payload:e}},F=(n(60),n(61),function(e){var t=e.onChange,n=e.unit,c=Object(a.useState)(!1),l=Object(o.a)(c,2),u=l[0],s=l[1],d=Object(a.useRef)();i(d,(function(){return s(!1)}));var m=function(e){s(!1),t(e)},E=r.a.createElement("button",{onClick:function(){return m("celsius")},className:g()({current:"celsius"===n})},"Celsius"),f=r.a.createElement("button",{onClick:function(){return m("farenheit")},className:g()({current:"farenheit"===n})},"Farenheit");return r.a.createElement("div",{className:"dropdown"},r.a.createElement("button",{onClick:function(){s(!u)}},S(n)," ",r.a.createElement(v.a,{icon:u?y.b:y.a})),u&&r.a.createElement("div",{className:"options",ref:d},"celsius"===n?r.a.createElement(r.a.Fragment,null,E,f):r.a.createElement(r.a.Fragment,null,f,E)))}),H=function(e){var t=e.data,n=Object(a.useState)("celsius"),c=Object(o.a)(n,2),l=c[0],i=c[1],u=O(t.weather[0].icon);return r.a.createElement("div",{className:"current-weather"},r.a.createElement("div",{className:"controls"},r.a.createElement("div",null,r.a.createElement("h2",null,"".concat(j(t.dt)," ").concat(new Date(1e3*t.dt).getHours(),"h")),r.a.createElement("span",null,t.weather[0].description)),r.a.createElement(F,{onChange:function(e){return i(e)},unit:l})),r.a.createElement("div",{className:"temp"},r.a.createElement("strong",null,r.a.createElement(v.a,{icon:null===u||void 0===u?void 0:u.icon,color:null===u||void 0===u?void 0:u.color})," ",N(t.temp,l),"\xb0")),r.a.createElement("div",{className:"additionnal-infos"},r.a.createElement("ul",null,r.a.createElement("li",null,"Feels like: ",N(t.feels_like,l),"\xb0"),r.a.createElement("li",null,"Wind: ",Math.round(360*t.wind_speed)/100,"km/h"),r.a.createElement("li",null,"Humidity: ",t.humidity,"%"))))},_=(n(62),n(63),function(e){var t=e.hourData,n=e.unit,a=e.isOpen,c=e.onToggle,l=O(t.weather[0].icon);return r.a.createElement("div",{className:g()("hourly-tab",{open:a}),onClick:c},r.a.createElement("div",{className:"heading"},r.a.createElement("div",null,r.a.createElement("strong",null,"".concat(new Date(1e3*t.dt).getHours(),"h"))),r.a.createElement("div",null,N(t.temp,n),"\xb0"),r.a.createElement("div",null,r.a.createElement(v.a,{alt:"Precipitation icon",title:"".concat(100*t.pop,"% chance of precipitations"),icon:t.pop>.15?y.q:y.r})),r.a.createElement("div",null,r.a.createElement(v.a,{icon:null===l||void 0===l?void 0:l.icon,color:l.color,alt:"Weather icon",title:S(t.weather[0].description)}))),r.a.createElement("div",{className:"body"},r.a.createElement("table",null,r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Feels like"),r.a.createElement("td",null,N(t.feels_like,n),"\xb0")),r.a.createElement("tr",null,r.a.createElement("th",null,"Wind"),r.a.createElement("td",null,Math.round(3.6*t.wind_speed)," km/h",t.wind_gust&&", with gusts up to ".concat(Math.round(3.6*t.wind_gust)," km/h"))),r.a.createElement("tr",null,r.a.createElement("th",null,"Humidity"),r.a.createElement("td",null,t.humidity,"%")),r.a.createElement("tr",null,r.a.createElement("th",null,"Atmospheric pressure"),r.a.createElement("td",null,t.pressure," hPa"))))))}),M=function(e){var t=e.data,n=Object(a.useState)("celsius"),c=Object(o.a)(n,2),l=c[0],i=c[1],u=Object(a.useState)(),s=Object(o.a)(u,2),d=s[0],m=s[1],E=function(e){m(d===e?null:e)};return r.a.createElement("div",{className:"two-days-weather"},r.a.createElement("div",{className:"controls"},r.a.createElement("h2",null,"Hourly weather"),r.a.createElement(F,{onChange:function(e){return i(e)},unit:l})),t&&r.a.createElement(r.a.Fragment,null,r.a.createElement("span",{className:"day-separator"},"Today"),t[0]&&t[0].filter((function(e,t){return t%3===0})).map((function(e,t){return r.a.createElement(_,{key:e.dt,onToggle:function(){return E(e.dt)},hourData:e,isOpen:d===e.dt,unit:l})})),r.a.createElement("span",{className:"day-separator"},j(t[1][0].dt)),t[1]&&t[1].filter((function(e,t){return t%3===0})).map((function(e,t){return r.a.createElement(_,{key:e.dt,onToggle:function(){return E(e.dt)},hourData:e,isOpen:d===e.dt,unit:l})}))))},x=(n(64),n(65),function(e){var t=e.dayData,n=e.unit,a=e.isOpen,c=e.onToggle,l=O(t.weather[0].icon);return r.a.createElement("div",{onClick:c,className:g()("tab",{open:a})},r.a.createElement("div",{className:"heading"},r.a.createElement("div",null,r.a.createElement("strong",null,j(t.dt)),r.a.createElement("br",null),S(t.weather[0].description)),r.a.createElement("div",{className:"precipitations"},t.pop>.15?r.a.createElement("span",{title:"Precipitation chances"},100*t.pop,"%"):""),r.a.createElement("div",null,r.a.createElement(v.a,{alt:"Weather icon",title:t.weather[0].description,icon:l.icon,color:l.color,style:{width:"40px",fontSize:"40px"}})),r.a.createElement("div",{className:"min-max"},r.a.createElement("span",{title:"Maximum temperature"},N(t.temp.max,n),"\xb0"),r.a.createElement("span",{title:"Minimum temperature"},N(t.temp.min,n),"\xb0"))),r.a.createElement("div",{className:"body"},r.a.createElement("table",{className:"general-infos"},r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Wind"),r.a.createElement("td",null,Math.round(3.6*t.wind_speed)," km/h")),r.a.createElement("tr",null,r.a.createElement("th",null,"Humidity"),r.a.createElement("td",null,t.humidity,"%")),r.a.createElement("tr",null,r.a.createElement("th",null,"Sunrise"),r.a.createElement("td",null,w(new Date(t.sunrise)))),r.a.createElement("tr",null,r.a.createElement("th",null,"Sunset"),r.a.createElement("td",null,w(new Date(t.sunset)))))),r.a.createElement("div",{className:"day-temps"},r.a.createElement("div",{className:"morning"},r.a.createElement("span",null,"Morning"),r.a.createElement("br",null),r.a.createElement("strong",null,N(t.temp.morn,n),"\xb0")),r.a.createElement("div",{className:"day"},r.a.createElement("span",null,"Day"),r.a.createElement("br",null),r.a.createElement("strong",null,N(t.temp.day,n),"\xb0")),r.a.createElement("div",{className:"evening"},r.a.createElement("span",null,"Evening"),r.a.createElement("br",null),r.a.createElement("strong",null,N(t.temp.eve,n),"\xb0")),r.a.createElement("div",{className:"night"},r.a.createElement("span",null,"Night"),r.a.createElement("br",null),r.a.createElement("strong",null,N(t.temp.night,n),"\xb0")))))}),G=function(e){var t=e.data,n=Object(a.useState)("celsius"),c=Object(o.a)(n,2),l=c[0],i=c[1],u=Object(a.useState)(),s=Object(o.a)(u,2),d=s[0],m=s[1];return r.a.createElement("div",{className:"weekly"},r.a.createElement("div",{className:"controls"},r.a.createElement("h2",null,"Weekly weather"),r.a.createElement(F,{onChange:function(e){return i(e)},unit:l})),r.a.createElement("div",null,t.map((function(e,t){return r.a.createElement(x,{dayData:e,unit:l,key:e.dt,isOpen:d===t,onToggle:function(){var e;m(d===(e=t)?null:e)}})}))))},L=(n(66),function(e){var t=e.children;return r.a.createElement("div",{className:"block"},t)}),P=(n(67),function(e){var t=e.address,n=k(t),a=n.cityName,c=n.countyName,l=n.countryName;return r.a.createElement("div",{className:"address"},r.a.createElement("h1",null,a),r.a.createElement("h2",null,c),r.a.createElement("h2",null,l))}),I=(n(68),function(){var e=Object(p.c)((function(e){return e.toastReducer.toast})),t=Object(p.b)();return r.a.createElement("div",{className:g()("toast",null===e||void 0===e?void 0:e.type,{show:null!==e})},e&&r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{onClick:function(){t(C())}},r.a.createElement(v.a,{icon:y.p,size:"2x"})),r.a.createElement("p",null,r.a.createElement("strong",null,e.title),r.a.createElement("br",null),e.message)))});var Y=function(){var e=Object(p.c)((function(e){return e.cityReducer})),t=Object(p.c)((function(e){return e.weatherReducer})),n=Object(p.b)();return Object(a.useEffect)((function(){e.city&&n(W(e.city.lat,e.city.lon))}),[e.city,n]),r.a.createElement("div",{className:"App"},r.a.createElement(I,null),r.a.createElement(R,null),e.city&&r.a.createElement(r.a.Fragment,null,r.a.createElement(P,{address:e.city.address}),t.weather?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"side-by-side"},r.a.createElement("div",null,r.a.createElement(L,null,r.a.createElement(H,{data:t.weather.current})),r.a.createElement(L,null,r.a.createElement(G,{data:t.weather.daily}))),r.a.createElement(L,null,r.a.createElement(M,{data:t.weather.hourly})))):r.a.createElement(f,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var U=n(9),q=n(4),z={city:null,loading:!1,error:null},B=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"[CITY] Set city":return Object(q.a)(Object(q.a)({},e),{},{city:t.payload});case"[CITY] Reset city":return Object(q.a)(Object(q.a)({},e),{},{city:null});default:return e}},J={weather:null,loading:!1,error:null},$=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:J,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"[WEATHER] Get Weather":return Object(q.a)(Object(q.a)({},e),{},{loading:!0,error:null});case"[WEATHER] Get Weather - Success":return Object(q.a)(Object(q.a)({},e),{},{loading:!1,weather:t.payload});case"[WEATHER] Get Weather - Failure":return Object(q.a)(Object(q.a)({},e),{},{loading:!1,error:t.payload});default:return e}},K={toast:null},Q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"[TOAST] Add toast":return Object(q.a)(Object(q.a)({},e),{},{toast:t.payload});case"[TOAST] Remove toast":return Object(q.a)(Object(q.a)({},e),{},{toast:null});default:return e}},V=n(28),X=(n(69),function(e){var t=Object(U.combineReducers)({cityReducer:B,weatherReducer:$,toastReducer:Q}),n=Object(U.applyMiddleware)(V.a);return Object(U.createStore)(t,e,n)}());l.a.render(r.a.createElement(p.a,{store:X},r.a.createElement(Y,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[29,1,2]]]);
//# sourceMappingURL=main.5287077f.chunk.js.map